<div class="container-fluid" style="max-width: 1200px; margin-top: 20px;">
    <div class="d-flex justify-content-end pt-2 new_group" style="padding: 10px 0px;">
        <button class="creategroup" mat-stroked-button (click)="createBatch()">
            <mat-icon style="font-size: 17px;margin-top: 6px !important;">add</mat-icon> New Group
        </button>
    </div>
    <div class="example-list mat-elevation-z1" cdkDropList cdkDropListOrientation="horizontal"
        (cdkDropListDropped)="drop($event)" *ngIf="groups_data && groups_data.length > 0; else elseblock">
        <div *ngIf="groups_data && groups_data.length > 0; " style="display: flex;">
            <mat-card class=" example-card wow flipInY" cdkDrag *ngFor="let group of groups_data; let i=index;"
                data-wow-duration="1.3s" [ngClass]="{'mat-elevation-z16':i==index,'crd-css':i==index}"
                (click)="cardClick(groups_data, i)">
                <div class="row">
                    <div class="col-9 mt-3">
                        <h6 class="chapter-font" *ngFor="let material of group.course"> <span *ngIf="material"></span>{{material.material_name}}</h6>
                    </div>
                    <div class=" col-3" style="border-left: 1px solid rgb(196, 192, 192);margin-top: 20px;">
                        <mat-icon style="color: #5b5c5b;">group</mat-icon> <br>
                        <p
                            style="color: rgb(182, 187, 187);margin-top: 0px !important;font-size: 23px;padding: 0;margin-left: -1px;">
                            {{group.users.length}}</p>
                    </div>
                </div>
                <div class="row p-0">
                    <div class="col-9 " style="margin-top: -35px;">

                        <mat-progress-bar mode="determinate" [value]="group.course_progress">
                        </mat-progress-bar> <br>
                        <!-- <p class="text-right"
                            style="color: rgb(182, 187, 187);font-size: 10px;padding: 0;margin-top: -20px;">Sessions:
                            <span style="font-size: 14px;padding: 0;margin-top: 2px;">6</span></p> -->
                    </div>
                    <div class="col-9" style="margin-top: -45px;">
                        <mat-progress-bar mode="determinate" [value]="group.batch_progress">
                        </mat-progress-bar> <br>
                        <!-- <p class="text-right"
                            style="color: rgb(182, 187, 187);font-size: 10px;padding: 0;margin-top: -20px;">Sessions:
                            <span style="font-size: 14px;padding: 0;margin-top: 2px;">6</span></p> -->
                    </div>
                </div>
                <div>
                    <h6 style="font-weight:600; text-align: center;">{{group.batch_name}}</h6>
                </div>
            </mat-card>
        </div>

        <!-- <mat-card class="example-box example-card" cdkDrag *ngFor="let group of groups_data; let i=index;"
            [ngClass]="{'mat-elevation-z16':i==index}" (click)="cardClick(groups_data, i)">
            <mat-card-content>
                <div class="row">
                    <div class="col col-6 justify-content-start" style="display:flex;padding: 0px;">
                        <h6 style="margin-bottom: 0px">{{group.course['material_name']}}</h6>
                    </div>
                    <div class=" col col-6 justify-content-end" style="display: flex;padding: 0px;">
                        <i class="fa fa-users stroke-transparent" aria-hidden="true"></i>
                        <h6 style="margin-bottom: 0px">{{group.users.length}}</h6>
                    </div>
                    <div class="col col-12 d-flex justify-content-center" style="margin-top: 20px">
                        <mat-progress-bar class="progress-bar" mode="determinate" [value]="group.course_progress">
                        </mat-progress-bar>
                        <p style="margin-bottom: 0px;">{{group.course_progress| number: '1.0-0'}}</p>
                    </div>
                </div>
                <div class="col col-12 d-flex justify-content-center" style="margin-top: 20px;">
                    <h6 style="font-weight: 600;">{{group.batch_name}}</h6>
                </div>
            </mat-card-content>
        </mat-card> -->
    </div>
    <ng-template #elseblock>
        <p style="margin: auto;">No Groups Found</p>
    </ng-template>
    <!-- <div class="fa-icons d-flex justify-content-end">
        <a (click)="addMembers(index)" type="button" class="fa-icons btn-floating btn-small btn-fb">
            <i class="fa fa-user-plus stroke-transparent fa-2x" aria-hidden="true"></i>
        </a>
        <a type="button" class="fa-icons  btn-floating btn-small btn-tw" [matMenuTriggerFor]="material1"
            *ngIf="groups_data">
            <i class="fa fa-unlock stroke-transparent fa-2x" aria-hidden="true"></i>
        </a>
        <a type="button" class="fa-icons  btn-floating btn-small btn-dribbble">
            <i class="fa fa-lock stroke-transparent fa-2x" aria-hidden="true"></i>
        </a>
    </div> -->
    <!-- c -->
    <!-- <div class="col-9 mt-3">
            <h6 class="chapter-font" *ngFor="let material of group.course">{{material.material_name}}</h6>
        </div> -->
    <!-- <mat-menu #material1="matMenu">
        <div *ngIf="groups_data && groups_data.length > 0">
            {{groups_data[i]}}
            <ng-container *ngFor="let material of groups_data[i].course">
                <button mat-menu-item *ngIf="material['_id'] == groups_data[index]['subject']" 
                [routerLink]="['/trainer/material/'+material['_id']+'/none/none/'+groups_data[index]['_id']]">{{material['material_name']}}</button>
            </ng-container>
        </div>
    </mat-menu> -->
    <!-- <br> -->
    <div class="col col-12 justify-content-center new_group mt-1"  *ngIf="groups_data && groups_data.length > 0;">
        <p *ngIf="groups_data && groups_data.length > 0" class="crd-font" style="text-align: center; ">Quick
            review
            of
            <!-- <span style="color: #14B8B1; font-size: 28px;"> {{groups_data[index]['batch_name']}}</span> </p> -->
            <span style="color:  #1352A2; font-size: 30px; text-shadow: 2px 2px #dee2e6;">
                {{groups_data[index]['batch_name']}}</span> </p>
    </div>

    <div class="row" style="display:flex;" *ngIf="groups_data && groups_data.length > 0;">

        <div *ngIf="groups_data.length>0" style="margin-top: 20px;" class="col col-6 justify-content-start">
            <span style="display: flex;">
                <h6 style="font-weight: 600;padding-right: 10px;">Courses: </h6>
                <p *ngFor="let material of groups_data[index].course" style="padding-right: 10px;">
                    {{material.material_name}}, </p>
            </span>
            <span style="display: flex;">
                <h6 style="font-weight: 600;padding-right: 10px;">Course Progress: </h6>
                <p style="padding-right: 10px;">{{groups_data[index].course_progress}}</p>
            </span>
            <span style="display: flex;">
                <h6 style="font-weight: 600;padding-right: 10px;">Batch Progress: </h6>
                <p style="padding-right: 10px;">{{groups_data[index].batch_progress}}</p>
            </span>
        </div>

        <div class="col col-6 pt-2 justify-content-end"
            style=" margin-bottom:22px;height: fit-content; text-align: end; margin: auto;" *ngIf="groups_data && groups_data.length > 0;">

            <button class="creategroup" mat-stroked-button (click)="add_course()"
                style="background-color: #F2671F !important;margin-left: 20px !important;">
                <mat-icon>add</mat-icon>&nbsp;&nbsp; Add Course
            </button>

            <button class="creategroup" mat-stroked-button [matMenuTriggerFor]="material1" *ngIf="groups_data"
                style="background-color: #00a699 !important;margin-left: 20px !important;">
                <i class="fa fa-unlock" style="font-size:17px;color:white;margin-top: -2px"></i>&nbsp;&nbsp; Assign Task
            </button>

            <button mat-stroked-button class="creategroup" (click)="addMembers(index)"
                style="background-color: #28abe3 !important;margin-left: 20px !important;">
                <i class="fa fa-handshake-o" style="font-size:17px;color:white;margin-top: -2px"></i>&nbsp;Add Members
            </button>

        </div>
        <!-- #97cd8c, #00a699, #00c4b5 -->
        <!-- <mat-menu #material0="matMenu">
            <div *ngIf="material_list">
                <ng-container *ngFor="let material of material_list">
                    <button mat-menu-item>{{material.material_name}}</button>
                </ng-container>
                <button mat-stroked-button class="creategroup" (click)="addMembers(index)"
                    style="background-color: #28abe3 !important;margin-left: 20px !important;">
                    <i class="fa fa-handshake-o" style="font-size:17px;color:white;margin-top: -2px"></i>&nbsp;Add
                    Members
                </button>
            </div>
        </mat-menu> -->

        <!-- <mat-form-field>
            <mat-label>Toppings</mat-label>
            <mat-select [formControl]="toppings" multiple>
              <mat-option *ngFor="let topping of toppingList" [value]="topping">{{topping}}</mat-option>
            </mat-select>
          </mat-form-field> -->
        <mat-menu #material1="matMenu">
            <div *ngIf="groups_data && groups_data.length > 0">
                <!-- *ngIf="material['_id'] == groups_data[index]['subject']"  -->
                <ng-container *ngFor="let material of groups_data[index].course">
                    <button mat-menu-item
                        [routerLink]="['/trainer/material/'+material['_id']+'/none/none/'+groups_data[index]['_id']]">{{material.material_name}}</button>
                </ng-container>
            </div>
        </mat-menu>
    </div>
    <mat-tab-group class="mat-elevation-z1 p-1" style="border-radius:5px;">
        <mat-tab label="Status">
            <div class="mat-elevation-z1" style="margin: 10px;">
                <table mat-table [dataSource]="dataSource2" #sort2="matSort" matSort matSortDisableClear
                    multiTemplateDataRows>
                    <ng-container matColumnDef="{{column}}" *ngFor="let column of displayedColumns2">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column | titlecase}} </th>
                        <td mat-cell *matCellDef="let element" (click)="get_task_data(element.task_id)" #myButton>
                            <ng-container [ngSwitch]="column">
                                <p *ngSwitchCase="'course'">{{element[column].material_name}}</p>
                                <p *ngSwitchCase="'date'"> {{element[column]}}</p>
                                <!--  | date:'EE, dd MM yy' -->
                                <p *ngSwitchCase="'target_date'"> {{element[column]}}</p>
                                <p *ngSwitchDefault>{{element[column]}}</p>
                            </ng-container>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="expandedDetail">
                        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns2.length">
                            <div class="example-element-detail"
                                [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                                <div class="example-element-description mat-elevation-z4" style="margin: 15px">
                                    <div class="row">
                                        <div class="col-4" style="padding: 20px">
                                            <div *ngFor="let childitem of element.topic; let index=index;">
                                                <p class="p-cu">
                                                    <mat-checkbox [checked]="true" [disabled]="true">
                                                        <h5 style="margin-bottom:1px"> {{childitem.chapter_name}}</h5>
                                                    </mat-checkbox>
                                                </p>
                                                <ul>
                                                    <li
                                                        *ngFor="let subchilditem of childitem.page_data; let i = index;">
                                                        <p class="p-cu">
                                                            <mat-checkbox [checked]="true" [disabled]="true">
                                                                <h6 style="margin-bottom:1px"> {{subchilditem}}</h6>
                                                            </mat-checkbox>
                                                        </p>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-8">
                                            <table mat-table [dataSource]="dataSource4" style="width: 100%;">
                                                <ng-container matColumnDef="s.no">
                        <th mat-header-cell *matHeaderCellDef> No. </th>
                        <td mat-cell *matCellDef="let ele; let ind=index"> {{ind + 1}} </td>
                    </ng-container>

                    <ng-container matColumnDef="email">
                        <th mat-header-cell *matHeaderCellDef> Email </th>
                        <td mat-cell *matCellDef="let ele"> {{ele.email}} </td>
                    </ng-container>

                    <ng-container matColumnDef="percentage">
                        <th mat-header-cell *matHeaderCellDef> Compleated Percent </th>
                        <td mat-cell *matCellDef="let ele"> {{ele.compleation_status}} </td>
                    </ng-container>

                    <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef> Status </th>
                        <td mat-cell *matCellDef="let ele"
                            [innerText]="ele.compleation_status == 100 ? 'compleated': (ele.compleation_status > 0 ? 'In Progress': 'Not Started')">
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns4"></tr>
                    <tr mat-row *matRowDef="let row1; columns: displayedColumns4;"></tr>
                </table>
            </div>

</div>
</div>
</div>
</td>
</ng-container>

<tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
<tr mat-row *matRowDef="let element; columns: displayedColumns2;" class="example-element-row"
    [class.example-expanded-row]="expandedElement === element"
    (click)="expandedElement = expandedElement === element ? null : element">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
</table>
<mat-paginator #paginator2 [pageSizeOptions]="[10,15,25,30,35,40,45,50]" showFirstLastButtons>
</mat-paginator>
</div>
</mat-tab>
<mat-tab label="Mcq">
    <ng-template matTabContent>
        <div class="mat-elevation-z4" style="margin: 10px;">
            <table mat-table [dataSource]="dataSource" #sort="matSort" matSort matSortDisableClear style="width:100%;">

                <ng-container matColumnDef="s.no">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> S.No. </th>
                    <td mat-cell *matCellDef="let row; let i = index;"> {{i+1}} </td>
                </ng-container>

                <!-- <ng-container matColumnDef="batch_name">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Group Id </th>
                        <td mat-cell *matCellDef="let row;"> {{row.batch_name}} </td>
                    </ng-container> -->

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
                    <td mat-cell *matCellDef="let row;"> {{row.name | titlecase}} </td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
                    <td mat-cell *matCellDef="let row;"> {{row.email}} </td>
                </ng-container>

                <ng-container matColumnDef="no_attempts">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Tests Attempted</th>
                    <td mat-cell *matCellDef="let row;" style="width:100px"> {{row.no_of_assessments_attempted}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="percentage">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Percentage(outof 10) </th>
                    <td mat-cell *matCellDef="let row;" style="width:200px">
                        <div class="d-flex">
                            <mat-progress-bar class="progress-bar" mode="determinate" [value]="row.percent">
                                {{row.percent}}
                            </mat-progress-bar>
                            <p style="margin-bottom: 0px;">{{row.percent| number: '1.0-0'}}</p>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="details">
                    <th mat-header-cell *matHeaderCellDef> </th>
                    <td mat-cell *matCellDef="let row">
                        <button mat-raised-button style="cursor: pointer;"
                            [disabled]="row.no_of_assessments_attempted==0"
                            (click)="assessments(row.assessment_data,row.name, row.email)">Assessment
                            Details</button>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <mat-paginator #paginator [pageSizeOptions]="[10,15,25,30,35,40,45,50]" showFirstLastButtons>
            </mat-paginator>
            <!-- <ng-container *ngIf="message">
                    <div class="d-flex justify-content-center" style="padding: 50px 0px 50px 0px">{{message}}</div>
                </ng-container> -->
        </div>
    </ng-template>
</mat-tab>
<mat-tab label="Challenges">
    <ng-template matTabContent>
        <div class="mat-elevation-z4" style="margin: 10px;">
            <table mat-table [dataSource]="dataSource1" #sort1="matSort" matSort matSortDisableClear
                style="width:100%;">

                <ng-container matColumnDef="s.no">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> S.No. </th>
                    <td mat-cell *matCellDef="let row; let i = index;"> {{i+1}} </td>
                </ng-container>

                <!-- <ng-container matColumnDef="batch_name">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Group Id </th>
                                <td mat-cell *matCellDef="let row;"> {{row.batch_name}} </td>
                            </ng-container> -->

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
                    <td mat-cell *matCellDef="let row;"> {{row.name | titlecase}} </td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
                    <td mat-cell *matCellDef="let row;"> {{row.email}} </td>
                </ng-container>

                <ng-container matColumnDef="no_attempts">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Attempted code tests </th>
                    <td mat-cell *matCellDef="let row;" style="width:100px"> {{row.challenges_attempted}} </td>
                </ng-container>

                <ng-container matColumnDef="percentage">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Percentage </th>
                    <td mat-cell *matCellDef="let row;" style="width:200px">
                        <div class="d-flex">
                            <mat-progress-bar class="progress-bar" mode="determinate" [value]="row.percent">
                                {{row.percent}}
                            </mat-progress-bar>
                            <p style="margin-bottom: 0px;">{{row.percent}}%</p>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="details">
                    <th mat-header-cell *matHeaderCellDef> </th>
                    <td mat-cell *matCellDef="let row">
                        <button mat-raised-button style="cursor: pointer;" (click)="assessments()">Assessment
                            Details</button>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
            </table>
            <mat-paginator #paginator1 [pageSizeOptions]="[10,15,25,30,35,40,45,50]" showFirstLastButtons>
            </mat-paginator>
        </div>
    </ng-template>
</mat-tab>
<mat-tab label="Overall">
    <ng-template matTabContent>
        <div class="mat-elevation-z4" style="margin: 10px;">
            <table mat-table [dataSource]="dataSource3" #sort3="matSort" matSort matSortDisableClear
                style="width:100%;">

                <ng-container matColumnDef="s.no">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> S.No. </th>
                    <td mat-cell *matCellDef="let row; let i = index;"> {{i+1}} </td>
                </ng-container>

                <!-- <ng-container matColumnDef="batch_name">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Group Id </th>
                                        <td mat-cell *matCellDef="let row;"> {{row.batch_name}} </td>
                                    </ng-container> -->

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
                    <td mat-cell *matCellDef="let row;"> {{row.name | titlecase}} </td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
                    <td mat-cell *matCellDef="let row;"> {{row.email}} </td>
                </ng-container>

                <ng-container matColumnDef="percentage">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Percentage </th>
                    <td mat-cell *matCellDef="let row;" style="width:200px">
                        <div class="d-flex">
                            <mat-progress-bar class="progress-bar" mode="determinate" [value]="row.percent">
                                {{row.percent}}
                            </mat-progress-bar>
                            <p style="margin-bottom: 0px;">{{row.percent}}%</p>
                        </div>
                    </td>
                </ng-container>
                <!-- <ng-container matColumnDef="details">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let row">
                                <button mat-raised-button style="cursor: pointer;" (click)="assessments()">Assessment
                                    Details</button>
                            </td>
                        </ng-container> -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns3;"></tr>
            </table>
            <mat-paginator #paginator3 [pageSizeOptions]="[10,15,25,30,35,40,45,50]" showFirstLastButtons>
            </mat-paginator>
        </div>
    </ng-template>
</mat-tab>

</mat-tab-group>
</div>